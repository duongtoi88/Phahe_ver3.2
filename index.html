<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Phả hệ Dương Danh</title>
  <base href="https://duongtoi88.github.io/Phahe_ver3.2/">
  <!-- Nhúng SheetJS để đọc file Excel -->
  <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
  <!-- Nhúng D3.js để vẽ sơ đồ -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script defer src="app.js"></script>
  <script defer src="mother-data.js"></script>
	<script defer src="mother-links.js"></script>
	<script defer src="mother-nodes.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Phả hệ Dương Danh ở Quốc Oai</h2>

	<!-- Tabs -->
	<div class="tabs">
	  <button class="tab-btn active" onclick="showTab('tree')">Cây gia phả</button>
	  <button class="tab-btn" onclick="showTab('grave')">Mộ chí</button>
	</div>

	<!-- ================= TAB CÂY ================= -->
	<div id="treeTab" class="tab-content active">

	  <!-- Dropdown chọn ID -->
	  <div style="margin: 10px;">
		<label for="rootSelector"><b>Chọn ID gốc:</b></label>
	  </div>

	  <!-- Checkbox -->
	  <div style="margin: 0 10px 10px;">
		<label>
		  <input type="checkbox" id="showGirls" style="margin-right: 6px;">
		  Cả Nam & Nữ
		</label>
	  </div>

	  <!-- Khu vực vẽ cây -->
	  <div id="tree-container"
		   style="overflow-x: auto; overflow-y: auto; white-space: nowrap; height: 100vh;">
	  </div>

	</div>

	<!-- ================= TAB MỘ CHÍ ================= -->
	<div id="graveTab" class="tab-content">
	  <div id="graveContainer" style="padding: 10px;"></div>
	</div>

  <!-- Tooltip vẫn giữ lại để gợi ý khi hover nếu cần -->
  <div id="tooltip" class="tooltip" style="display: none;"></div>
  
  <script src="grave.js"></script>

		<script>
		function showTab(tab) {

		  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
		  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

		  if (tab === 'tree') {
			document.querySelectorAll('.tab-btn')[0].classList.add('active');
			document.getElementById('treeTab').classList.add('active');
		  } else {
			document.querySelectorAll('.tab-btn')[1].classList.add('active');
			document.getElementById('graveTab').classList.add('active');

			if (!window.graveRendered) {
			  renderGraveTab();
			  window.graveRendered = true;
			}
		  }
		}
		</script>

</body>
</html>
